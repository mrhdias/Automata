const wsExtension=(n,o)=>{const r=o["extension"];if(r["name"]!=="websocket"){throw new Error('The extension name is not "websocket"!')}if(r["connect"]===""){throw new Error('The websocket extension "connect" property is empty')}const e=new WebSocket(r["connect"]);const s=()=>{if(r.hasOwnProperty("function")){if(r["function"]===""){throw new Error(`The websocket extension \"function\" property is empty!`)}app.custom_functions[r["function"]](e)}};e.addEventListener("open",async e=>{if(r.hasOwnProperty("element")){if(r["element"]===""){throw new Error(`The websocket extension \"element\" property is empty!`)}const t=document.querySelector(r["element"]);if(t!==null){if(r.hasOwnProperty("trigger")){if(r["trigger"]===""){throw new Error(`The websocket extension \"trigger\" property is empty!`)}}else{r["trigger"]="click"}t.addEventListener(r["trigger"],s)}}else{s()}});e.addEventListener("message",async e=>{n.result=e.data;delete e.data;const t=await app.processReqData(n,o);await app.sequenceTasks(t,n,o)})};